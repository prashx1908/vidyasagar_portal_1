!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@wix/image-kit"),require("react")):"function"==typeof define&&define.amd?define("rb_wixui.thunderbolt[ImageZoom]",["imageClientApi","react"],t):"object"==typeof exports?exports["rb_wixui.thunderbolt[ImageZoom]"]=t(require("@wix/image-kit"),require("react")):e["rb_wixui.thunderbolt[ImageZoom]"]=t(e.__imageClientApi__,e.React)}("undefined"!=typeof self?self:this,(function(e,t){return function(){var a={42662:function(t){"use strict";t.exports=e},5329:function(e){"use strict";e.exports=t},448:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},i={};function n(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return a[e](r,r.exports,n),r.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return function(){"use strict";n.r(r),n.d(r,{components:function(){return ee}});var e=n(448),t=n.n(e),a=n(5329);const i=(e,t=0)=>{let a,i=!1;return function n(...r){i?a=r:(e.apply(this,r),i=!0,setTimeout((()=>{i=!1,a&&(n.apply(this,a),a=null)}),t))}},o=e=>Object.entries(e).reduce(((e,[t,a])=>(t.includes("data-")&&(e[t]=a),e)),{});function l(e){var t,a,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=l(e[t]))&&(i&&(i+=" "),i+=a);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}var s=function(){for(var e,t,a=0,i="";a<arguments.length;)(e=arguments[a++])&&(t=l(e))&&(i&&(i+=" "),i+=t);return i};const c=13,d=27,u=37,g=39;function m(e){return t=>{t.keyCode===e&&(t.preventDefault(),t.stopPropagation(),t.currentTarget.click())}}const h=m(32),p=m(c),f=e=>{p(e),h(e)},v=m(d),x=new RegExp("<%= compId %>","g"),b=(e,t)=>e.replace(x,t);var y="HlRz5e",E=n(42662);const{STATIC_MEDIA_URL:M}=E,w=({fittingType:e,src:t,target:a,options:i})=>{const n=E.getPlaceholder(e,t,a,{...i,autoEncode:!0});return n?.uri&&!/^[a-z]+:/.test(n.uri)&&(n.uri=`${M}${n.uri}`),n},I=/^[a-z]+:/;var C=e=>{const{id:t,containerId:i,uri:n,alt:r,name:o="",role:l,width:s,height:c,displayMode:d,devicePixelRatio:u,quality:g,alignType:m,bgEffectName:h="",focalPoint:p,upscaleMethod:f,className:v="",crop:x,imageStyles:b={},targetWidth:E,targetHeight:C,targetScale:k,onLoad:P=(()=>{}),onError:_=(()=>{}),shouldUseLQIP:B,containerWidth:N,containerHeight:S,getPlaceholder:T,isInFirstFold:H,placeholderTransition:L,socialAttrs:W,isSEOBot:O,skipMeasure:j,lazyLoadImgExperimentOpen:A,hasAnimation:R,allowWEBPTransform:D}=e,z=a.useRef(null);let K="";const q="blur"===L,$=a.useRef(null);if(!$.current)if(T||B||H||O){const e={upscaleMethod:f,...g||{},shouldLoadHQImage:H,isSEOBot:O,hasAnimation:R,allowWEBPTransform:D};$.current=(T||w)({fittingType:d,src:{id:n,width:s,height:c,crop:x,name:o,focalPoint:p},target:{width:N,height:S,alignment:m,htmlTag:"img"},options:e}),K=!$.current.transformed||H||O?"":"true"}else $.current={uri:void 0,css:{img:{}},attr:{img:{},container:{}},transformed:!1};const Z=!O&&(T||B)&&!H&&$.current.transformed,F=a.useMemo((()=>JSON.stringify({containerId:i,...i&&{containerId:i},...m&&{alignType:m},...j&&{skipMeasure:!0},displayMode:d,...N&&{targetWidth:N},...S&&{targetHeight:S},...E&&{targetWidth:E},...C&&{targetHeight:C},...k&&{targetScale:k},isLQIP:Z,isSEOBot:O,lqipTransition:L,imageData:{width:s,height:c,uri:n,name:o,displayMode:d,hasAnimation:R,...g&&{quality:g},...u&&{devicePixelRatio:u},...p&&{focalPoint:p},...x&&{crop:x},...f&&{upscaleMethod:f}}})),[i,m,j,d,S,N,E,C,k,Z,O,L,s,c,n,o,g,u,p,x,f,R]),Q=$.current,U=Q?.uri,G=Q?.srcset,J=Q.css?.img,X=`${y} ${v}`;a.useEffect((()=>{const e=z.current;P&&e?.currentSrc&&e?.complete&&P({target:e})}),[]);const V=Q&&!Q?.transformed?`max(${s}px, 100%)`:E?`${E}px`:null;return a.createElement("wow-image",{id:t,class:X,"data-image-info":F,"data-bg-effect-name":h,"data-has-ssr-src":K,"data-animate-blur":!O&&Z&&q?"":void 0,style:V?{"--wix-img-max-width":V}:{}},a.createElement("img",{src:U,ref:z,alt:r||"",role:l,style:{...J,...b},onLoad:P,onError:_,...N&&{width:N},...S&&{height:S},...W,...H?{srcSet:G?.dpr?.map((e=>I.test(e)?e:`${M}${e}`)).join(", "),fetchpriority:"high"}:A?{loading:"lazy"}:{}}))};const k={root:"linkElement"},P=(e,i)=>{const{href:n,role:r,target:l,rel:s,className:c="",children:d,linkPopupId:u,anchorDataId:g,anchorCompId:m,tabIndex:v,dataTestId:x=k.root,title:b,onClick:y,onDoubleClick:E,onMouseEnter:M,onMouseLeave:w,onFocusCapture:I,onBlurCapture:C,"aria-live":P,"aria-disabled":_,"aria-label":B,"aria-labelledby":N,"aria-pressed":S,"aria-expanded":T,"aria-describedby":H,"aria-haspopup":L}=e,W=void 0!==e.activateByKey?e.activateByKey:(e=>e?"SpaceOrEnter":"Space")(u);let O;switch(W){case"Enter":O=p;break;case"Space":O=h;break;case"SpaceOrEnter":O=f;break;default:O=void 0}return void 0!==n?a.createElement("a",t()({},o(e),{"data-testid":x,"data-popupid":u,"data-anchor":g,"data-anchor-comp-id":m,href:n||void 0,target:l,role:u?"button":r,rel:s,className:c,onKeyDown:O,"aria-live":P,"aria-disabled":_,"aria-label":B,"aria-labelledby":N,"aria-pressed":S,"aria-expanded":T,"aria-haspopup":L,"aria-describedby":H,title:b,onClick:y,onMouseEnter:M,onMouseLeave:w,onDoubleClick:E,onFocusCapture:I,onBlurCapture:C,ref:i,tabIndex:u?0:v}),d):a.createElement("div",t()({},o(e),{"data-testid":x,className:c,tabIndex:v,"aria-label":B,"aria-labelledby":N,"aria-haspopup":L,"aria-disabled":_,"aria-expanded":T,title:b,role:r,onClick:y,onDoubleClick:E,onMouseEnter:M,onMouseLeave:w,ref:i}),d)};var _=a.forwardRef(P);const B="link",N="prev",S="next",T="close",H={marginTop:0,marginLeft:0,dialogBoxHeight:600,dialogBoxWidth:600,imageContainerWidth:500,imageContainerHeight:500},L={horizontal:0,vertical:85},W=240,O=60,j=function(e,t){void 0===e&&(e=[]);const a=e.findIndex((e=>{let{id:a}=e;return a===t}));return-1!==a?a:0},A=e=>{let{panelHeight:t,screenMeasures:a,dialogBoxPadding:i,...n}=e;const{height:r}=a,o=(e=>{let{imageMeasures:t,maxImageWidth:a,maxImageHeight:i,minBoxWidth:n}=e;const r=a/t.width,o=i/t.height,l=Math.min(r,o);return{width:Math.max(Math.round(t.width*l),n),height:Math.round(t.height*l)}})(n),l=o.width+(i.horizontal||0),s=o.height+t+(i.vertical||0),c=Math.ceil(Math.max((r-s)/2,0));return{marginLeft:i.horizontal/2,marginTop:c,dialogBoxHeight:s,dialogBoxWidth:l,imageContainerWidth:o.width,imageContainerHeight:o.height}};var R="lQwAgp",D="uuK35W",z="zcU_VZ",K="i_vvWK",q="JMM2KW",$="YRSSGK",Z="XN0hAn",F="_O9Cuj",Q="dBklX7",U="Hf5W3Z",G="jOqgDj",J="P6ZpNH",X="vJh_3i",V="em3A_G";var Y=e=>{var n,r;const{id:l,className:c,onClose:m,images:h,selectedImageIndex:p,onImageChangeCallback:f}=e,x=a.useRef(null),y=a.useRef(null),[E,M]=a.useState(H),[w,I]=a.useState(!0),k="img_"+l+"_"+p,P=()=>p+1<h.length?p+1:0,j=()=>p?p-1:h.length-1,Y=(e,t)=>{I(!1),setTimeout((()=>{const a=h[e].id;t&&(t.stopPropagation(),t.preventDefault()),f(a)}),250)},{link:ee,title:te,description:ae,width:ie,height:ne}=h[p],re=()=>{m(!1)};var oe;a.useEffect((()=>{const e=document.activeElement;return x.current&&x.current.focus(),()=>e&&e.focus()}),[]),oe=()=>{var e;const t=i(se,300);return t(),null==(e=window)||e.addEventListener("resize",t),()=>{var e;null==(e=window)||e.removeEventListener("resize",t)}},(0,a.useEffect)(oe,[]);const le=e=>{e.target instanceof HTMLAnchorElement||e.stopPropagation()},se=()=>{var e,t;const a=null==(e=x.current)?void 0:e.getBoundingClientRect(),i=null==(t=y.current)?void 0:t.getBoundingClientRect();if(a){const e={imageMeasures:{width:ie,height:ne},screenMeasures:{width:a.width,height:a.height},panelHeight:(null==i?void 0:i.height)||0};M((e=>{const{screenMeasures:t,imageMeasures:a,panelHeight:i}=e,n=L,{width:r,height:o}=t,l=i||20,s=W,c=O/2+l+n.vertical,d=Math.min(a.width,r-s),u=Math.min(a.height,o-c);return A({imageMeasures:a,screenMeasures:t,maxImageWidth:d,maxImageHeight:u,panelHeight:l,minBoxWidth:600,dialogBoxPadding:n})})(e))}},ce=h.length>1?{onKeyDown:e=>{switch(e.keyCode){case g:Y(P());break;case u:Y(j());break;case d:re()}}}:{onClick:re},de=h.length>1&&(null==(n=h[p])||null==(n=n.link)||!n.linkPopupId)?re:void 0,ue=((e,t)=>t?{"--filter-effect-svg-url":b(t,e)}:{})(k,h[p].filterEffectSvgUrl),ge=h[p];return a.createElement("div",t()({className:s(c,R)},ce),a.createElement("div",t()({id:l},o(e),{className:D,tabIndex:0,ref:x,onKeyDown:v,"data-testselectedimageindex":p}),a.createElement("div",{className:s(z,{[K]:!w}),style:{maxWidth:E.dialogBoxWidth,maxHeight:E.dialogBoxHeight,marginTop:E.marginTop,"--width":E.imageContainerWidth+"px","--height":E.imageContainerHeight+"px",...ue}},a.createElement(C,t()({},ge,{onLoad:()=>{I(!0),se()},className:V,id:"img_"+l+"_"+p,displayMode:"fit",alt:null!=(r=ge.alt)?r:ge.title})),a.createElement("div",{className:s(U,{[K]:!w}),onClick:le,ref:y},te&&a.createElement("h3",{itemProp:"name",className:G},te),ae&&a.createElement("p",{itemProp:"description",className:X},ae),ee&&a.createElement(_,t()({},ee,{dataTestId:B,className:J,onClick:de}),"Go to link"))),a.createElement("div",{className:q,onKeyDown:v,"data-testid":T,onClick:h.length>1?re:void 0},a.createElement("svg",{viewBox:"0 0 180 180",className:$,tabIndex:0,role:"button","aria-label":"close"},a.createElement("path",{d:"M5 5 L175 175 M175 5 L5 175"}))),h.length>1&&a.createElement(a.Fragment,null,a.createElement("div",{className:Z,onClick:e=>{Y(P(),e)},"data-testid":S},a.createElement("svg",{viewBox:"0 0 180 310",className:Q,tabIndex:0,role:"button","aria-label":"next"},a.createElement("path",{d:"M10 10 L170 161 M170 150 L10 300"}))),a.createElement("div",{className:F,onClick:e=>{Y(j(),e)},"data-testid":N},a.createElement("svg",{viewBox:"0 0 180 310",className:Q,tabIndex:0,role:"button","aria-label":"previous"},a.createElement("path",{d:"M170 10 L10 161 M10 150 L170 300"}))))))};const ee={ImageZoom:{component:e=>{const{id:i,className:n,uri:r,alt:l,name:s,width:c,height:d,displayMode:u,onClose:g,link:m,title:h,images:p,dataItemId:f="",onImageChange:v}=e,x={id:i,containerId:i,uri:r,alt:l,name:s,width:c,height:d,displayMode:u,link:m,title:h},[b,y]=a.useState(f),E=null!=p?p:[x];return a.createElement(Y,t()({id:i},o(e),{className:n,images:E,selectedImageIndex:j(E,b),onImageChangeCallback:e=>{y(e),null==v||v(e)},onClose:g}))}}}}(),r}()}));
//# sourceMappingURL=https://static.parastorage.com/services/editor-elements-library/dist/thunderbolt/rb_wixui.thunderbolt[ImageZoom].1865a707.bundle.min.js.map